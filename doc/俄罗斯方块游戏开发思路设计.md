# 俄罗斯方块游戏开发思路设计

## 基本知识点要求

**控件的使用、事件处理、自定义组件&调用、调用多个qml文件、多页面切换**、画布、动画、**model/view**、多媒体、**C++与QML混合编程从而做到UI与业务逻辑分离**



## 界面

主界面（有难度选择、**带背景图与自定义按钮**）

游戏界面（想办法做一些动画特效、**方块控件的复用**）

**分数结果界面（游戏结束后，跳转到分数结果界面）（页面上部分显示当前成绩，下部分用表格显示历史成绩）****

设置界面（设置背景音乐等）





## 基本功能

- 带背景音乐与静音功能

- **使用数据库存储历史成绩**

- 游戏界面

  - **背景图**
    - 要有明显的轨迹，是用户可看清下落轨迹，使其能看清下落点
  - **未开始状态页面、暂停状态页面**（具备动画效果）
  - 游戏刚开始，初始化第一行随机摆放小方格
  - **游戏时间**
  - **当前得分**、上轮得分、**历史最高得分**
  - **当前难度等级**
  - **下一个图案预览**
  - **操作按键（长按则视为连续多次触发）**
    - **方块旋转**
    - **向左移动**
    - **向右移动**
    - **向下移动**
    - **快速掉落**

  - 功能键
    - **暂停**
    - 重新开始（具备画面清除动画效果）
    - 退出
  - 方块动画效果
    - 方块移动拖尾效果
    - 方块消除效果
    - 方块下落后触碰效果
    - 方块堆满时效果（游戏失败而结束）
    - **方块出现时，是逐行显露的，不是一下闪现出来**



## 俄罗斯方块单元设计

### 方块形状种类

![](.\图片\网络游戏参考图.bmp)





参考《Qt及Qt Quick开发实战精解》第二章方块游戏一文的设计思路





## 动画设计思路-初稿

**注意：之所以没有什么思路，是因为对QML的知识了解不深，或许QML还有其他控件可以使功能更容易实现，只是自己目前不知道。所以，边做功能边上网查询更多QML知识寻找更边界的实现方案**



需要考虑的状态：

- 各类方块的移动与旋转

- 方块堆叠后，中间某行消除后，上层整块的下落效果

- 1~N行满格的检查与消除

- 各类方块在临近边界的旋转、移动的情况

- 必须要有轨迹背景图

  

### 方案1（新颖型）

画面底层背景图，上层放上各种图案

缺点：行满检测不好做

### 方案2（复古型）

底层绘制n*m个方格控件，通过点亮与熄灭两种状态控制

缺点：方块旋转移动等动画不好做

### 结论：采用方案2







## 动画设计思路-定稿

- **定下上、下、左、右四条边界基线（一个矩形**）
- **以一个小方块为最小单元，实现碰撞检测、移动、边界检测（通过方块坐标与边界线坐标来判断）等基本功能，做成独立组件**
- **使用最小单元方块拼凑不同的大方块形状，实现整体旋转、移动、拖尾效果等功能**
- **满行检测：通过背景方块的状态来检测一行是否已满**
- **满行消除后，满行上方的所有方块整体往下移动一格**



## 逐页进行其UI开发与完善

关于各页面直接的逻辑，采用建立C++类唯一实例的方式实现，在main()中创建实例对象，在QML中调用实例对象的接口函数，完成各页面对业务的逻辑交互

### 主界面



### 游戏界面



### 分数结果界面



### 设置界面









